<?xml version="1.0" encoding="utf-8" ?>
<ContentView xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="Solution.DesktopApp.Components.CarListComponent"
             x:Name="this">
    
    <!-- Car Card Container -->
    <Border BackgroundColor="{AppThemeBinding Light=White, Dark=#2D2D2D}"
            Stroke="{AppThemeBinding Light=#E0E0E0, Dark=#404040}"
            StrokeThickness="1"
            Padding="0"
            Margin="5">
        <Border.StrokeShape>
            <RoundRectangle CornerRadius="15" />
        </Border.StrokeShape>
        
        <!-- Shadow Effect -->
        <Border.Shadow>
            <Shadow Brush="{AppThemeBinding Light=#40000000, Dark=#60000000}"
                    Offset="0,2"
                    Radius="8"
                    Opacity="0.3" />
        </Border.Shadow>

        <Grid Padding="20">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>

            <!-- Header Section with Image and Main Info -->
            <Grid Grid.Row="0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="100" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>

                <!-- Car Image -->
                <Border Grid.Column="0" 
                        BackgroundColor="{AppThemeBinding Light=#F5F5F5, Dark=#404040}"
                        WidthRequest="80"
                        HeightRequest="60">
                    <Border.StrokeShape>
                        <RoundRectangle CornerRadius="10" />
                    </Border.StrokeShape>
                    <Image HorizontalOptions="Center"
                           VerticalOptions="Center"
                           Aspect="AspectFill">
                        <Image.Source>
                            <UriImageSource Uri="{Binding Car.WebContentLink, Source={x:Reference this}}"
                                            CacheValidity="24:00:00" />
                        </Image.Source>
                    </Image>
                </Border>

                <!-- Main Car Info -->
                <StackLayout Grid.Column="1" 
                           Spacing="5"
                           Margin="15,0,0,0"
                           VerticalOptions="Center">
                    
                    <!-- Car Model - Main Title -->
                    <Label Text="{Binding Car.Model, Source={x:Reference this}}"
                           FontSize="20"
                           FontAttributes="Bold"
                           TextColor="{AppThemeBinding Light=#1976D2, Dark=#64B5F6}"
                           LineBreakMode="TailTruncation" />
                    
                    <!-- Manufacturer -->
                    <Label Text="{Binding Car.Manufacturer.Name, Source={x:Reference this}}"
                           FontSize="16"
                           TextColor="{AppThemeBinding Light=#666, Dark=#AAA}"
                           FontAttributes="Italic" />
                </StackLayout>

                <!-- Action Buttons -->
                <StackLayout Grid.Column="2" 
                           Orientation="Horizontal"
                           Spacing="10"
                           VerticalOptions="Center">
                    
                    <Border BackgroundColor="{AppThemeBinding Light=#2196F3, Dark=#1976D2}"
                            Padding="8"
                            WidthRequest="40"
                            HeightRequest="40">
                        <Border.StrokeShape>
                            <RoundRectangle CornerRadius="20" />
                        </Border.StrokeShape>
                        <ImageButton Source="{AppThemeBinding Light=edit_dark.png, Dark=edit_light.png}"
                                     Command="{Binding EditCommand, Source={x:Reference this}}"
                                     BackgroundColor="Transparent"
                                     WidthRequest="24" 
                                     HeightRequest="24" />
                    </Border>

                    <Border BackgroundColor="{AppThemeBinding Light=#F44336, Dark=#D32F2F}"
                            Padding="8"
                            WidthRequest="40"
                            HeightRequest="40">
                        <Border.StrokeShape>
                            <RoundRectangle CornerRadius="20" />
                        </Border.StrokeShape>
                        <ImageButton Source="{AppThemeBinding Light=delete_dark.png, Dark=delete_light.png}"
                                     Command="{Binding DeleteCommand, Source={x:Reference this}}"
                                     CommandParameter="{Binding Car.Id, Source={x:Reference this}}"
                                     BackgroundColor="Transparent"
                                     WidthRequest="24" 
                                     HeightRequest="24" />
                    </Border>
                </StackLayout>
            </Grid>

            <!-- Divider -->
            <BoxView Grid.Row="1" 
                     HeightRequest="1" 
                     BackgroundColor="{AppThemeBinding Light=#E0E0E0, Dark=#404040}"
                     Margin="0,15,0,15" />

            <!-- Details Section -->
            <Grid Grid.Row="2">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>

                <!-- Type -->
                <StackLayout Grid.Column="0" Spacing="3">
                    <Label Text="TYPE" 
                           FontSize="10" 
                           FontAttributes="Bold"
                           TextColor="{AppThemeBinding Light=#999, Dark=#666}"
                           HorizontalTextAlignment="Center" />
                    <Border BackgroundColor="{AppThemeBinding Light=#E3F2FD, Dark=#1E3A5F}"
                            Padding="8,4">
                        <Border.StrokeShape>
                            <RoundRectangle CornerRadius="12" />
                        </Border.StrokeShape>
                        <Label Text="{Binding Car.Type.Name, Source={x:Reference this}}"
                               FontSize="12"
                               FontAttributes="Bold"
                               TextColor="{AppThemeBinding Light=#1976D2, Dark=#64B5F6}"
                               HorizontalTextAlignment="Center" />
                    </Border>
                </StackLayout>

                <!-- Engine -->
                <StackLayout Grid.Column="1" Spacing="3">
                    <Label Text="ENGINE" 
                           FontSize="10" 
                           FontAttributes="Bold"
                           TextColor="{AppThemeBinding Light=#999, Dark=#666}"
                           HorizontalTextAlignment="Center" />
                    <Label Text="{Binding Car.Cubic, Source={x:Reference this}, StringFormat='{0} cc'}"
                           FontSize="14"
                           FontAttributes="Bold"
                           TextColor="{AppThemeBinding Light=#FF9800, Dark=#FFB74D}"
                           HorizontalTextAlignment="Center" />
                </StackLayout>

                <!-- Year -->
                <StackLayout Grid.Column="2" Spacing="3">
                    <Label Text="YEAR" 
                           FontSize="10" 
                           FontAttributes="Bold"
                           TextColor="{AppThemeBinding Light=#999, Dark=#666}"
                           HorizontalTextAlignment="Center" />
                    <Label Text="{Binding Car.ReleaseYear, Source={x:Reference this}}"
                           FontSize="14"
                           FontAttributes="Bold"
                           TextColor="{AppThemeBinding Light=#4CAF50, Dark=#81C784}"
                           HorizontalTextAlignment="Center" />
                </StackLayout>

                <!-- Doors -->
                <StackLayout Grid.Column="3" Spacing="3">
                    <Label Text="DOORS" 
                           FontSize="10" 
                           FontAttributes="Bold"
                           TextColor="{AppThemeBinding Light=#999, Dark=#666}"
                           HorizontalTextAlignment="Center" />
                    <Label Text="{Binding Car.NumberOfDoors, Source={x:Reference this}}"
                           FontSize="14"
                           FontAttributes="Bold"
                           TextColor="{AppThemeBinding Light=#9C27B0, Dark=#BA68C8}"
                           HorizontalTextAlignment="Center" />
                </StackLayout>
            </Grid>
        </Grid>
    </Border>
</ContentView>